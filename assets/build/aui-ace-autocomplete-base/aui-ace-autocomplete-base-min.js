YUI.add("aui-ace-autocomplete-base",function(e,t){var n=e.Lang,r=e.Array,i=e.Do,s="insertText",o="exec",u="host",a="processor",f=-1,l=0,t="ace-autocomplete-base",c=function(){};c.prototype={initializer:function(){var t=this;t._editorCommands=[],e.after(this._bindUIACBase,this,"renderUI");var n=t.get(a);n&&!n.get(u)&&n.set(u,t)},_addSuggestion:function(e){var t=this,n=t._getEditor(),r=t.get(a).getSuggestion(t._matchParams.match,e);return n.insert(r),n.focus(),t.fire("addSuggestion",r),new i.Halt(null)},_bindUIACBase:function(){var t=this;t.publish("cursorChange",{defaultFn:t._defaultCursorChangeFn});var n=t._getEditor();n.on("change",e.bind(t._onEditorChange,t)),n.commands.addCommand({name:"showAutoComplete",bindKey:e.merge(t.get("showListKey"),{sender:"editor|cli"}),exec:function(e,r,i){var s=n.getCursorPosition();t._processAutoComplete(s.row,s.column)}}),n.getSelection().on("changeCursor",e.bind(t._onEditorChangeCursor,t)),t.on("destroy",t._destroyUIACBase,t)},_defaultCursorChangeFn:function(e){var t=this,n=t._getEditor(),r=n.getCursorPosition(),i=r.row,s=r.column,o=t._matchParams;if(i!==o.row||s<o.match.start)t.fire("cursorOut");else{var u=n.getSession().getLine(i),f=u.substring(o.match.start,s);t.get(a).getMatch(f)||t.fire("match")}},_destroyUIACBase:function(){var e=this;e._removeAutoCompleteCommands()},_getEditor:function(){var e=this;return e.get("host").getEditor()},_handleEnter:function(e){var t=this;if(e==="\n"||e==="	"){var n=t._getSelectedEntry();return t._addSuggestion(n)}},_onEditorChange:function(e){var t=this,n=e.data,r=n.action;if(r===s||r==="removeText"){var i=n.range,o=i.start.column,u=i.end.row,a=i.start.row;r===s&&a===u&&t._processAutoComplete(a,o+1),t.fire(r,{column:o,dataRange:i,endRow:u,startRow:a})}},_onEditorChangeCursor:function(e){var t=this;t.fire("cursorChange",t._getEditor().getCursorPosition())},_onResultsError:function(e){var t=this;t.fire("resultsError",e)},_onResultsSuccess:function(e){var t=this;t.set("results",e)},_overwriteCommands:function(){var e=this,t=e._getEditor(),n=t.commands.commands;e._editorCommands.push(i.before(e._handleEnter,t,"onTextInput",this),i.before(e._handleKey,n.golinedown,o,this,40),i.before(e._handleKey,n.golineup,o,this,38),i.before(e._handleKey,n.gotoend,o,this,35),i.before(e._handleKey,n.gotolineend,o,this,35),i.before(e._handleKey,n.gotolinestart,o,this,36),i.before(e._handleKey,n.gotopagedown,o,this,34),i.before(e._handleKey,n.gotopageup,o,this,33),i.before(e._handleKey,n.gotostart,o,this,36))},_processAutoComplete:function(t,r){var i=this,s=r,o=i._getEditor(),u=o.getSession().getLine(t);u=u.substring(0,r);var f=i.get(a),l=f.getMatch(u),c;n.isObject(l)&&(c=o.renderer.textToScreenCoordinates(t,r),i._matchParams={column:r,match:l,row:t},f.getResults(l,e.bind(i._onResultsSuccess,i),e.bind(i._onResultsError,i))),i.fire("match",{column:r,coords:c,line:u,match:l,row:t})},_removeAutoCompleteCommands:function(){var t=this;(new e.EventHandle(t._editorCommands)).detach(),t._editorCommands.length=0}},c.NAME=t,c.NS=t,c.ATTRS={processor:{validator:function(e){return n.isObject(e)||n.isFunction(e)}},showListKey:{validator:n.isObject,value:{mac:"Alt-Space",win:"Ctrl-Space"}}},e.AceEditor.AutoCompleteBase=c},"2.0.0pr5",{requires:["aui-ace-editor"]});
